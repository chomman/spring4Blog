<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.walter.dao.LogDao">
	<insert id="insExceptionLog" parameterType="java.util.HashMap">
		INSERT INTO exception_log
		(exception, message, request_path, ip, method, params, trace_log, username, userlink)
		VALUES
		(#{exception}, #{message}, #{request_path}, #{ip}, #{method}, #{params}, #{trace_log}, #{username}, #{userlink})
	</insert>

	<select id="getExceptionLogList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		SELECT *
		  FROM exception_log
		<if test="exception != null and exception != ''">
	  	 WHERE exception = #{exception}
		</if>
		ORDER BY reg_dt DESC
		LIMIT 10 OFFSET #{currPageNo}*10
	</select>

	<select id="getExceptionLogCount" parameterType="java.util.HashMap" resultType="java.lang.Integer">
		SELECT count(*)
		  FROM exception_log
		<if test="exception != null and exception != ''">
		 WHERE exception = #{exception}
		</if>
	</select>

	<select id="getExceptionOptions" resultType="java.lang.String">
		SELECT exception
		  FROM exception_log
 		GROUP BY exception
	</select>
	
</mapper>